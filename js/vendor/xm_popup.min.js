"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}var XM_Popup=function(v){function p(e){return"cross"===e?t():"arrow"===e?n():void 0}var g={selectorPrefix:"xm-popup",closeButtonIcon:"cross",type:"premade",popupSelectors:[],onOverlayCreate:function(e){}},h={},w=function(){document.body.style.overflowY="auto"},L=function(){document.body.style.overflowY="hidden"},b=function(e){var t=window.innerHeight,n=e.offsetHeight;n<=t-120?e.style.marginTop="".concat((t-n)/2,"px"):(e.style.marginTop="".concat(60,"px"),e.style.marginBottom="".concat(60,"px"))},t=function(){var e=document.createElementNS("http://www.w3.org/2000/svg","svg"),t=document.createElementNS("http://www.w3.org/2000/svg","path");return e.setAttribute("viewBox","0 0 12 12"),e.setAttribute("preserveAspectRatio","xMinYMin meet"),t.setAttribute("d","M12,9.6L9.6,12L6,8.399L2.4,12L0,9.6L3.6,6L0,2.4L2.4,0L6,3.6L9.6,0L12,2.4L8.399,6L12,9.6z"),e.appendChild(t),e},n=function(){var e=document.createElementNS("http://www.w3.org/2000/svg","svg"),t=document.createElementNS("http://www.w3.org/2000/svg","path");return e.setAttribute("viewBox","0 0 8 12"),e.setAttribute("preserveAspectRatio","xMinYMin meet"),t.setAttribute("d","M6.399,7.5L6.399,7.5L1.6,12L0,10.5L4.8,6L0,1.5L1.6,0L8,6L6.399,7.5z"),e.appendChild(t),e},E=function(e){return"".concat(g.selectorPrefix,"_").concat(e)},C=function(){var e=document.createElement("div");return e.classList.add(E("overlay")),g.onOverlayCreate(e),e},S=function(){var e,t=document.createElement("div");t.classList.add(E("container")),0<g.popupSelectors.length&&(e=t.classList).add.apply(e,_toConsumableArray(g.popupSelectors));return t},A=function(){var e=[];return void 0!==g.triggerElement?g.triggerElement instanceof Array?e=g.triggerElement:e.push(g.triggerElement):void 0!==g.trigger&&(e=document.querySelectorAll(g.trigger)),e},x=function(){return void 0!==g.premadeContentElement?g.premadeContentElement:document.querySelector(g.premadeContent)},_=function(e){var t=document.createElement("div"),n=document.createElement("iframe");return t.classList.add(E("iframe-container")),n.setAttribute("allowfullscreen",""),n.setAttribute("allow","autoplay"),n.setAttribute("src",e),t.appendChild(n),t},M=function(e,t){var n=document.createElement("div"),r=document.createElement("img");n.classList.add(E("gallery-container")),r.classList.add(E("gallery-image")),n.appendChild(r);function o(){r.setAttribute("src",e[d])}function a(){d=d+1<e.length?d+1:0,o()}function i(){d=0<=d-1?d-1:e.length-1,o()}var d=0;if(o(),1<e.length){var l=document.createElement("div"),c=p("arrow"),s=document.createElement("div"),u=p("arrow");c.classList.add(E("button-next-icon")),u.classList.add(E("button-previous-icon")),l.classList.add(E("button-next")),s.classList.add(E("button-previous")),l.appendChild(c),s.appendChild(u),l.addEventListener("mousedown",a),s.addEventListener("mousedown",i),t.appendChild(l),t.appendChild(s)}return{container:n,changeSlideOnKey:function(e){37===e.keyCode?i():39===e.keyCode&&a()},length:e.length}},T=function(){var e=document.createElement("div");if(e.classList.add(E("close-button")),g.closeButtonHTML)e.innerHTML=g.closeButtonHTML;else{var t=p(g.closeButtonIcon);t.classList.add(E("close-button-icon")),e.appendChild(t)}return e},O=function e(t,n){var r;for(var o in n)"object"!==_typeof(n[o])||n[o]instanceof Date||n[o]instanceof HTMLElement?n[o]instanceof Date?t[o]=new Date(n[o].getTime()):t[o]=n[o]:(r=n[o]instanceof Array?[]:{},void 0===t[o]&&(t[o]=r),e(t[o],n[o]))};return function(){O(g,v);var e=A();if("iframe"===g.type||"gallery"===g.type){var t=!0,n=!1,r=void 0;try{for(var l,o=function(){var e=l.value,t=C(),n=S(),r=T(),o=void 0,a=void 0;if(n.appendChild(r),t.appendChild(n),"iframe"===g.type){var i=void 0!==e.dataset.iframeUrl?e.dataset.iframeUrl:"";o=_(i),n.appendChild(o)}else if("gallery"===g.type){n.classList.add(E("container-gallery"));var d=void 0!==e.dataset.gallery?JSON.parse(e.dataset.gallery):[];a=M(d,t),n.appendChild(a.container)}e.addEventListener("mousedown",function(){document.body.appendChild(t),"gallery"===g.type&&1<a.length&&window.addEventListener("keydown",a.changeSlideOnKey)}),r.addEventListener("mousedown",function(){t.remove(),"gallery"===g.type&&1<a.length&&window.removeEventListener("keydown",a.changeSlideOnKey)}),t.addEventListener("mousedown",function(e){e.target===this&&(t.remove(),"gallery"===g.type&&1<a.length&&window.removeEventListener("keydown",a.changeSlideOnKey))})},a=e[Symbol.iterator]();!(t=(l=a.next()).done);t=!0)o()}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}else if("premade"===g.type){var i=C(),d=S(),c=T(),s=x();i.classList.add(E("overlay-premade")),d.classList.add(E("container-premade")),d.appendChild(c),d.appendChild(s),i.appendChild(d),h.show=function(){document.body.appendChild(i),L(),b(d)};var u=!0,p=!(h.hide=function(){i.remove(),w()}),m=void 0;try{for(var y,f=e[Symbol.iterator]();!(u=(y=f.next()).done);u=!0){y.value.addEventListener("mousedown",h.show)}}catch(e){p=!0,m=e}finally{try{u||null==f.return||f.return()}finally{if(p)throw m}}c.addEventListener("mousedown",h.hide),i.addEventListener("mousedown",function(e){e.target.querySelector("."+E("container"))&&h.hide()}),window.addEventListener("resize",function(){b(d)})}}(),h};